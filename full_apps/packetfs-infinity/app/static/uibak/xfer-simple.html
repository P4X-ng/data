<!doctype html><html lang=en><head><meta charset=utf-8><title>PFS Simple Transfer</title><meta name=viewport content="width=device-width,initial-scale=1"><style>body{margin:0;font-family:system-ui,Arial,sans-serif;background:#07111d;color:#dbe3ec;display:flex;flex-direction:column;min-height:100vh}header{background:#0e2036;padding:.55rem .9rem;font-size:.85rem;letter-spacing:.5px;display:flex;align-items:center;gap:.7rem;font-weight:600;color:#8ecbff}header .dot{width:10px;height:10px;border-radius:50%;background:#ff5f56;box-shadow:18px 0 0 #ffbd2e,36px 0 0 #27c93f}main{flex:1;display:flex;flex-direction:column;max-width:1080px;margin:0 auto;padding:1.2rem;gap:1.1rem}h1{margin:.2rem 0;font-size:1.05rem;color:#8ecbff;letter-spacing:.5px}section{background:#0c1b2e;border:1px solid #132b46;padding:1rem;border-radius:8px;display:flex;flex-direction:column;gap:.6rem}label{font-size:.65rem;text-transform:uppercase;opacity:.7;display:block;margin-bottom:.2rem}input[type=file]{font-size:.7rem}button{background:#319bff;border:none;color:#021524;padding:.55rem .9rem;border-radius:6px;font-size:.7rem;letter-spacing:.5px;font-weight:600;cursor:pointer;display:inline-flex;align-items:center;gap:.4rem}button.secondary{background:#132b46;color:#dbe3ec}button:disabled{opacity:.4;cursor:not-allowed}.row{display:flex;flex-direction:row;gap:1rem;flex-wrap:wrap}.grow{flex:1}.card{background:#091a2c;border:1px solid #132b46;padding:.7rem .8rem;border-radius:6px;display:flex;flex-direction:column;gap:.4rem}table{border-collapse:collapse;width:100%;font-size:.65rem}th,td{padding:.35rem .5rem;border-bottom:1px solid #132b46;text-align:left}th{font-weight:600;color:#6fbaff}tbody tr:hover{background:#11263b}code{background:#132b46;padding:.2rem .35rem;border-radius:4px;font-size:.65rem}#log{font-size:.55rem;line-height:.9rem;max-height:160px;overflow:auto;background:#091423;border:1px solid #132b46;padding:.4rem;border-radius:4px}footer{padding:.45rem .8rem;font-size:.55rem;text-align:center;background:#061320;color:#567;margin-top:1rem}.pill{padding:.2rem .55rem;border-radius:999px;font-size:.55rem;background:#132b46;letter-spacing:.5px}.ok{background:#104225;color:#6ff79a}.warn{background:#443411;color:#ffd479}.err{background:#4a1d21;color:#ff9fa5}.stat-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:.5rem}.stat{background:#091a2c;border:1px solid #132b46;padding:.45rem .55rem;border-radius:6px;font-size:.6rem;display:flex;flex-direction:column;gap:.25rem}.stat span{font-size:.75rem;font-weight:600;color:#8ecbff}</style></head><body><header><div class=dot></div><span>PFS Simple Transfer</span><span id=ver class=pill>initializing</span></header><main><h1>Upload Object</h1><section><div class=row><div class=grow><label>Select File</label><input id=file type=file></div><div style=align-self:flex-end><button id=btnUpload disabled>Upload</button></div></div><div id=uploadMeta class=row style=display:none><div class=card style=min-width:220px><strong id=upName></strong><div style=font-size:.6rem;opacity:.8>Size: <span id=upSize></span></div><div style=font-size:.6rem;opacity:.8>SHA256: <code id=upSha></code></div><div style=font-size:.6rem;opacity:.8>Tx Ratio: <span id=upRatio>n/a</span></div></div><div class=grow class=card><label style=margin:0>Download Direct</label><div style=display:flex;gap:.4rem;flex-wrap:wrap><a id=dlLink class=pill href=# target=_blank rel=noopener>bytes</a><button id=btnCopyId class=secondary style=font-size:.6rem>Copy Object ID</button></div></div></div></section><h1>Objects</h1><section><div style=display:flex;justify-content:space-between;align-items:center><div style=font-size:.6rem;opacity:.7>Recently uploaded objects (in-memory)</div><button id=btnRefresh class=secondary style=font-size:.55rem>Refresh</button></div><table><thead><tr><th>Filename</th><th>Size</th><th>SHA256</th><th>Tx Ratio</th><th></th></tr></thead><tbody id=objRows><tr><td colspan=5 style=text-align:center;opacity:.6>None yet</td></tr></tbody></table></section><h1>Logs</h1><section><div id=log></div></section></main><footer>Endpoints: <code>/objects</code>, <code>/objects/{id}/bytes</code> • Minimal UI • Experimental</footer><script>(()=>{const $=id=>document.getElementById(id);const fmtSize=n=>{if(!n&&n!==0)return'?';const u=['B','KB','MB','GB'];let i=0;while(n>=1024&&i<u.length-1){n/=1024;i++;}return n.toFixed(n<10&&i>0?2:1)+' '+u[i];};const log=m=>{const d=new Date().toISOString().split('T')[1].replace('Z','');$('log').innerHTML+=`<div>[${d}] ${m}</div>`;$('log').scrollTop=$('log').scrollHeight};const setVer=v=>$('ver').textContent=v;async function apiList(){const r=await fetch('/objects');if(!r.ok)throw new Error('list failed '+r.status);return r.json();}function renderRows(list){const tb=$('objRows');tb.innerHTML='';if(!list.length){tb.innerHTML='<tr><td colspan=5 style="text-align:center;opacity:.6">None</td></tr>';return;}for(const o of list){const tr=document.createElement('tr');tr.innerHTML=`<td>${o.filename||'(unnamed)'}</td><td>${fmtSize(o.size)}</td><td><code style=font-size:.55rem>${(o.sha256||'').slice(0,16)}</code></td><td>${o.tx_ratio?o.tx_ratio.toFixed(2):'—'}</td><td><a class=pill href="/objects/${o.object_id}/bytes" target=_blank rel=noopener>download</a></td>`;tb.appendChild(tr);}}async function refresh(){try{const list=await apiList();renderRows(list);}catch(e){log('refresh error '+e.message);} }async function upload(file){const fd=new FormData();fd.append('file',file);log('uploading '+file.name+' ('+fmtSize(file.size)+')');const r=await fetch('/objects',{method:'POST',body:fd});if(!r.ok)throw new Error('upload failed '+r.status);const j=await r.json();log('uploaded sha256:'+j.sha256);showUploadMeta(file,j);}function showUploadMeta(file,j){$('uploadMeta').style.display='flex';$('upName').textContent=file.name;$('upSize').textContent=fmtSize(file.size);$('upSha').textContent=j.sha256.slice(0,32)+'...';$('upRatio').textContent=j.tx_ratio?j.tx_ratio.toFixed(2):'—';$('dlLink').href='/objects/'+j.object_id+'/bytes';$('btnCopyId').onclick=()=>{navigator.clipboard.writeText(j.object_id).then(()=>log('copied object id'));};refresh();}const fileInput=$('file');fileInput.addEventListener('change',()=>{ $('btnUpload').disabled=!fileInput.files.length;});$('btnUpload').onclick=async()=>{if(!fileInput.files.length)return;$('btnUpload').disabled=true;try{await upload(fileInput.files[0]);}catch(e){log(e.message);}finally{$('btnUpload').disabled=false;}};$('btnRefresh').onclick=refresh;refresh();setVer('ready');})();</script></body></html>