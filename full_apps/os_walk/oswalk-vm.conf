# OS-Walk VM Configuration
# A complete distributed OS running in QEMU

[vm]
name = "oswalk-distributed-os"
memory = "4G"
cpus = 4
disk_size = "20G"
network = "bridge"

[boot]
# Boot from custom OS-Walk ISO
iso = "oswalk-live.iso"
kernel_args = "quiet splash oswalk.autostart=1"

[hardware]
# Enable virtualization for nested containers
enable_kvm = true
enable_nested = true

# Network interfaces
network_interfaces = [
    { type = "bridge", bridge = "br0" },
    { type = "user", hostfwd = "tcp::8811-:8811" },
    { type = "user", hostfwd = "tcp::6379-:6379" }
]

# Storage
disks = [
    { path = "oswalk-root.qcow2", size = "20G", format = "qcow2" },
    { path = "oswalk-data.qcow2", size = "100G", format = "qcow2", mount = "/data" }
]

[services]
# Auto-start OS-Walk services
autostart = [
    "redis-server",
    "oswalk-bridge",
    "oswalk-osv-workers", 
    "oswalk-network-cpu",
    "oswalk-web-ui"
]

[network]
# Packet bridge configuration
packet_bridge_enabled = true
auto_discover_nodes = true
bridge_mount_point = "/net"

# Network CPU configuration
network_cpu_enabled = true
dns_servers = ["8.8.8.8", "1.1.1.1", "208.67.222.222"]
http_endpoints = ["httpbin.org", "jsonplaceholder.typicode.com"]

[storage]
# PacketFS configuration
packetfs_enabled = true
blob_size = "1G"
auto_translate_binaries = true
fuse_mount = "/pfs"