"use strict";(self["webpackChunkdesktop_wallet"]=self["webpackChunkdesktop_wallet"]||[]).push([[9709],{92266:function(e,t,n){n.d(t,{Z:function(){return C}});var o=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"bg-contain bg-no-repeat relative rounded-full",class:[{[e.bgIconClass]:!e.icon&&!e.iconUri||e.error}]},[e.showNonVerifiedStatus&&!e.verified?t("img",{staticClass:"absolute",class:[e.nonVerifiedTokenIconClasses],attrs:{src:n(37652)},on:{mouseout:function(t){return e.$emit("hideUnverifiedTokenPopover")},mouseover:function(t){return e.$emit("showUnverifiedTokenPopover",t)}}}):e._e(),e.displayChainBadge?t("img",{staticClass:"-bottom-1 -right-1 absolute border-2 border-dark-N16 h-5 rounded-full w-5",attrs:{src:e.chainLogo},on:{mouseover:e.showChainTokenPopover}}):e._e(),e.displayChainBadge?t("chain-token-popover",{ref:"chainTokenPopover",attrs:{chain:e.chain,"popover-position":"left-[86px]"}}):e._e(),e.checked?t("div",{staticClass:"-ml-[1.5px] -mt-0.5 absolute bg-black bg-opacity-80 border-2 border-brand-primary h-9 rounded-full w-9"},[t("img",{staticClass:"h-4 mt-2 mx-auto w-4",attrs:{src:n(65035)}})]):e._e(),e.error?e._e():t("img",{staticClass:"h-full object-contain rounded-full w-full",class:{"bg-white":e.loaded&&!e.error},attrs:{src:e.icon||e.iconUri},on:{error:function(t){e.error=!0},load:function(t){e.loaded=!0}}})],1)},r=[],s=n(79317),i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("Transition",{attrs:{name:"slide"}},[t("simple-popover",{ref:"popover",staticClass:"fixed t-chain_token_popover text-sm w-0 z-10",class:[e.popoverPosition],attrs:{"background-class":"bg-dark-N04",caret:!1,"caret-horizontal-position":"",padding:"p-0"}},[t("chain-badge",{staticClass:"h-6 text-xs w-max",attrs:{chain:e.chain}})],1)],1)},a=[],l=n(43130),c=n(18135),d=n(20144),u=d.ZP.extend({name:"ChainTokenPopover",components:{ChainBadge:l.Z,SimplePopover:c.Z},props:{chain:{default:void 0,type:Object},popoverPosition:{required:!0,type:String}},computed:{popover(){return this.$refs.popover}},methods:{show(e){this.popover.show(),this.$nextTick((()=>{const t=this.popover.$el,n=t.offsetHeight+e.offsetY;t.style.top=e.pageY-n+20+"px"}))}}}),h=u,m=n(1001),p=(0,m.Z)(h,i,a,!1,null,"5b9d2111",null),f=p.exports,k=n(13692),v=n(13212),g=n(37426),w=d.ZP.extend({name:"TokenIcon",components:{ChainTokenPopover:f},props:{address:{default:"",type:String},chain:{default:void 0,type:Object},checked:{default:!1,type:Boolean},iconUri:{default:"",type:String},nonVerifiedTokenIconClasses:{default:"-left-2.5 h-5 top-2 w-5",type:String},showChainInfo:{default:!1,type:Boolean},type:{default:"",type:String}},data(){return{error:!1,loaded:!1,token:void 0}},computed:{bgIconClass(){let e="bg-generic-token";return this.showNonVerifiedStatus&&!this.verified&&(e="bg-generic-token-unverified"),`${e} bg-dark-N16`},chainLogo(){return this.chain?(0,k.Z)(this.chain).icon():""},chainTokenPopover(){return this.$refs.chainTokenPopover},displayChainBadge(){return!!this.token&&(this.showChainInfo&&!g.Z.isNativeToken(this.token))},icon(){const e=v["default"].isNftType(this.type);return this.error||!this.chain||e?"":(0,k.Z)(this.chain).tokenIconUrl(this.address)},showNonVerifiedStatus(){const e=["Overview","WatchListSettings"],t=e.includes(this.$route.name),n="undefined"!==typeof this.token;return!t&&n},verified(){return!this.showNonVerifiedStatus||g.Z.isTokenVerified(this.token)}},watch:{address(){this.error=!1,this.loaded=!1}},mounted(){this.address&&this.chain&&(this.token=this.$store.getters.getTokenViaSerializedKey(this.address,this.chain,s.oZ.ALL))},methods:{showChainTokenPopover(e){this.chainTokenPopover.show(e)}}}),b=w,y=(0,m.Z)(b,o,r,!1,null,"8c61503c",null),C=y.exports},43130:function(e,t,n){n.d(t,{Z:function(){return d}});var o=function(){var e=this,t=e._self._c;return e.chainNameFriendly?t("div",{staticClass:"flex items-center justify-center px-2 py-0.5 rounded-full space-x-1 t-chain-badge text-center text-dark-N77 truncate",class:[e.backgroundColor]},[e.chainLogo?t("img",{staticClass:"border-2 border-dark-N16 h-5 object-contain rounded-full w-5",attrs:{alt:"",src:e.chainLogo}}):e._e(),t("div",{staticClass:"t-chain-badge-name"},[e._v(e._s(e.chainNameFriendly))])]):e._e()},r=[],s=n(13692),i={name:"ChainBadge",props:{backgroundColor:{default:"bg-dark-N16",type:String},chain:{default:void 0,type:Object}},computed:{chainLogo(){if(this.chain)return(0,s.Z)(this.chain).icon()},chainNameFriendly(){if(this.chain)return this.$store.getters.chainNameFriendly(this.chain)}}},a=i,l=n(1001),c=(0,l.Z)(a,o,r,!1,null,null,null),d=c.exports},39709:function(e,t,n){n.d(t,{Z:function(){return L}});var o=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"flex flex-col token-form"},[e.tokenCreateMode?[t("div",{staticClass:"font-medium mb-4 text-base text-white"},[e._v(" "+e._s(e.$t("general.network"))+" ")]),t("network-selector",{staticClass:"mb-8 relative",attrs:{"networks-list":e.customNetworks},model:{value:e.token.chain,callback:function(t){e.$set(e.token,"chain",t)},expression:"token.chain"}}),t("opera-input",e._b({staticClass:"mb-8",attrs:{label:e.$t("general.tokenName"),name:"name",placeholder:e.$t("general.tokenName")},on:{input:e.validate},model:{value:e.token.name,callback:function(t){e.$set(e.token,"name","string"===typeof t?t.trim():t)},expression:"token.name"}},"opera-input",{...e.showError("name")},!1))]:e._e(),e._l(e.formFieldsConfig,(function(n){return t("opera-input",e._b({key:`token-form-field-${n.name}`,staticClass:"mb-8",attrs:{label:n.label,name:n.name,placeholder:n.label},on:{input:e.validate},model:{value:e.token[n.name],callback:function(t){e.$set(e.token,n.name,t)},expression:"token[field.name]"}},"opera-input",{...e.showError(n.name)},!1))})),t("div",{staticClass:"flex-grow"}),t("div",{staticClass:"flex justify-between mb-10"},[t("outlined-button",{staticClass:"w-44",attrs:{title:e.$t("general.cancel")},on:{click:e.tokenFormCancelled}}),t("primary-button",{staticClass:"w-44",attrs:{disabled:e.formInvalid,title:e.$t("general."+(e.tokenCreateMode?"add":"save"))},on:{click:e.tokenFormConfirmed}})],1)],2)},r=[],s=n(81719),i=n(79317),a=n(70794),l=function(){var e=this,t=e._self._c;return e.value?t("div",{staticClass:"w-full",attrs:{tabindex:"0"},on:{focusout:e.hideDropdown}},[t("div",{staticClass:"bg-input-bg border border-white cursor-pointer flex rounded-full t-network_selector-show_dropdown",on:{click:e.showDropdown}},[t("token-icon",{staticClass:"h-8 mx-4 my-3 w-10",attrs:{address:e.address,chain:e.value}}),t("div",{staticClass:"flex items-center justify-between mt-0.5 w-full"},[t("div",{staticClass:"tracking-wider"},[t("div",{staticClass:"-my-1 font-bold text-base"},[e._v(e._s(e.activeNetwork.name))]),t("div",{staticClass:"font-normal text-white text-xs"},[e._v(" "+e._s(e.$t("general.balance"))+": "+e._s(e.fullBalance)+" ")])]),t("i",{staticClass:"icon-chevron_down m-2 mr-3 text-white w-6"})])],1),t("network-selector-dropdown",{ref:"dropdown",attrs:{networks:e.networksList,selected:e.value}})],1):e._e()},c=[],d=n(46686),u=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.showing,expression:"showing"}],staticClass:"absolute bg-grey-25 left-0 right-0 rounded-lg rounded-t-none z-10"},[t("div",{staticClass:"px-1"},e._l(e.networks,(function(n,o){return t("network-item",{key:o,staticClass:"my-1",attrs:{address:n.nativeCurrency.contract.contract,chain:n.chain,checked:e.isSameChain(e.selected,n.chain),name:n.name,selectable:"",symbol:n.nativeCurrency.contract.symbol,token:n.nativeCurrency,value:n},on:{change:e.itemClicked}})})),1)])},h=[],m=function(){var e=this,t=e._self._c;return e.disabled?e._e():t("div",{staticClass:"bg-input-bg border-white cursor-pointer flex px-1 rounded-lg t-network_selector_item-click w-full",class:`t-network_selector_item-click_${e.encodeChainUi(e.chain)}`,on:{click:e.click}},[t("token-icon",{staticClass:"h-8 mx-4 my-3 w-10",attrs:{address:e.address,chain:e.chain,checked:e.checked}}),t("div",{staticClass:"flex items-center justify-between mt-0.5 w-full"},[t("div",{staticClass:"tracking-wider"},[t("div",{staticClass:"-my-1 font-bold text-base"},[e._v(e._s(e.name))]),t("div",{staticClass:"font-normal text-white text-xs"},[e._v(" "+e._s(e.$t("general.balance"))+": "+e._s(e.fullBalance)+" ")])])])],1)},p=[],f=n(92266),k={name:"NetworkSelectorItem",components:{TokenIcon:f.Z},model:{event:"change",prop:"modelValue"},props:{address:{default:"",type:String},chain:{default:void 0,type:Object},checked:{default:!1,type:Boolean},disabled:{default:!1,type:Boolean},modelValue:{default:void 0,type:[String,Object,Array]},name:{default:"",type:String},selectable:{default:!0,type:Boolean},symbol:{default:"",type:String},token:{default:void 0,type:Object},value:{default:void 0,type:[String,Object,Array]}},computed:{fullBalance(){return this.$store.getters.getFullTokenBalance(this.address,this.token,this.chain,i.oZ.ALL)}},methods:{click(){this.$emit("change",this.value)},encodeChainUi:d.sJ,onChange(e){this.$emit("change",e)}}},v=k,g=n(1001),w=(0,g.Z)(v,m,p,!1,null,null,null),b=w.exports,y={name:"NetworkSelectorDropdown",components:{NetworkItem:b},props:{networks:{default:()=>[],type:Array},selected:{default:null,type:Object}},data(){return{callback:null,loading:!1,search:"",showing:!1}},methods:{close(){this.showing=!1},isSameChain:d.F2,async itemClicked(e){this.loading=!0,await this.callback(e.chain),this.showing=!1,this.loading=!1},show(e){this.callback=e,this.showing=!0}}},C=y,_=(0,g.Z)(C,u,h,!1,null,null,null),x=_.exports,$={name:"NetworkSelector",components:{NetworkSelectorDropdown:x,TokenIcon:f.Z},props:{networksList:{default:()=>[],type:Array},value:{default:void 0,type:Object}},data(){return{dropdown:!1}},computed:{activeNetwork(){return this.networksList.find((e=>(0,d.F2)(e.chain,this.value)))},address(){return this.token.contract.contract},fullBalance(){return this.$store.getters.getFullTokenBalance(this.address,this.token,this.value,i.oZ.ALL)},symbol(){return this.token.contract.symbol},token(){return this.activeNetwork.nativeCurrency}},methods:{hideDropdown(){this.$refs.dropdown.close()},showDropdown(){this.$refs.dropdown.showing?this.hideDropdown():this.$refs.dropdown.show((e=>{this.$emit("input",e)}))}}},N=$,Z=(0,g.Z)(N,l,c,!1,null,null,null),F=Z.exports,S=n(14957),T=n(9906),P=n(25778),I=n(20144),j=I.ZP.extend({name:"TokenForm",components:{NetworkSelector:F,OperaInput:S.Z,OutlinedButton:T.Z,PrimaryButton:P.Z},props:{tokenData:{default:null,type:Object}},data(){const[e]=this.$store.getters.customNetworks;return{error:{},formInvalid:!1,showDeleteConfirmationPopup:!1,token:{address:"",chain:e.chain,decimals:null,name:"",symbol:""}}},computed:{chain(){const{chain:e}=this.$route.query;return e?JSON.parse(e):null},customNetworks(){return this.$store.getters.customNetworks},formFieldsConfig(){return[{label:this.$t("general.contractAddress"),name:"address"},{label:this.$t("general.symbol"),name:"symbol"},{label:this.$t("general.decimal"),name:"decimals"}]},tokenCreateMode(){return!this.tokenData},tokenFormFields(){return this.$children.filter((e=>e.$options._componentTag?.includes("opera-input")))}},watch:{error:{deep:!0,handler(e){this.formInvalid=!!Object.values(e).length}}},mounted(){if(this.tokenData)for(const e in this.tokenData)this.token[e]=this.tokenData[e];this.chain&&(this.token.chain=this.chain)},methods:{showError(e){return e in this.error?{error:this.error[e],icon:"icon-error"}:null},tokenFormCancelled(){this.$emit("tokenFormCancelled")},tokenFormConfirmed(){if(this.validateAll()){const{token:e}=this,t={address:e.address,chain:e.chain,decimals:new a.Z(e.decimals).toNumber(),name:e.name,symbol:e.symbol,type:i.iv.FUNGIBLE};this.$emit("tokenFormConfirmed",t)}},validate(e,t){const{target:n}=t,{name:o}=n;let r={...this.error};const s=this.validator(o,e);s.fieldIsValid?delete r[o]:r=Object.assign({},r,{[o]:s.message}),this.error=r},validateAll(){const e={},t=this.tokenFormFields;return t.forEach((({name:t,value:n})=>{const o=this.validator(t,n);o.fieldIsValid||(e[t]=o.message)})),this.error=e,!Object.entries(this.error).length},validator(e,t){let n,o=!0;switch(e){case"name":o=!!t,n=this.$t("errors.generic.incorrectField",{fieldName:this.$t("general.tokenName")});break;case"address":o=s.Ze(t),n=this.$t("errors.generic.incorrectField",{fieldName:this.$t("general.contract")});break;case"symbol":o=s.HA(t),n=this.$t("errors.generic.incorrectField",{fieldName:this.$t("general.symbol")});break;case"decimals":o=s.xP(t),n=this.$t("errors.generic.incorrectField",{fieldName:this.$t("general.decimal")});break;default:o=!0,n=""}return{fieldIsValid:o,message:n}}}}),B=j,O=(0,g.Z)(B,o,r,!1,null,null,null),L=O.exports},81719:function(e,t,n){n.d(t,{Ff:function(){return m},HA:function(){return h},JW:function(){return d},Ze:function(){return u},wC:function(){return c},xP:function(){return a}});var o=n(70794),r=n(38531),s=n.n(r);function i(e){return(0,o.Z)(e)}function a(e){return i(e).isPositive()}function l(e){return/^(https?):\/\/.+$/.test(e)}function c(e){return/^(|wss?):\/\/.+$/.test(e)||l(e)}function d(e){const t=i(e);return t.isInteger()&&t.isPositive()}function u(e){return s().validate(e,"ETH")}function h(e){return/^[a-zA-Z]+$/.test(e)}function m(e){return l(e)}},65035:function(e,t,n){e.exports=n.p+"img/check_selected.1169a7e5.svg"},37652:function(e,t,n){e.exports=n.p+"img/unverified.3e563384.svg"}}]);