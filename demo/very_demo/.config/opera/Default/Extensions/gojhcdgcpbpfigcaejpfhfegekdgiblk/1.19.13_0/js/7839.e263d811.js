"use strict";(self["webpackChunkdesktop_wallet"]=self["webpackChunkdesktop_wallet"]||[]).push([[7839],{92266:function(t,e,s){s.d(e,{Z:function(){return _}});var i=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"bg-contain bg-no-repeat relative rounded-full",class:[{[t.bgIconClass]:!t.icon&&!t.iconUri||t.error}]},[t.showNonVerifiedStatus&&!t.verified?e("img",{staticClass:"absolute",class:[t.nonVerifiedTokenIconClasses],attrs:{src:s(37652)},on:{mouseout:function(e){return t.$emit("hideUnverifiedTokenPopover")},mouseover:function(e){return t.$emit("showUnverifiedTokenPopover",e)}}}):t._e(),t.displayChainBadge?e("img",{staticClass:"-bottom-1 -right-1 absolute border-2 border-dark-N16 h-5 rounded-full w-5",attrs:{src:t.chainLogo},on:{mouseover:t.showChainTokenPopover}}):t._e(),t.displayChainBadge?e("chain-token-popover",{ref:"chainTokenPopover",attrs:{chain:t.chain,"popover-position":"left-[86px]"}}):t._e(),t.checked?e("div",{staticClass:"-ml-[1.5px] -mt-0.5 absolute bg-black bg-opacity-80 border-2 border-brand-primary h-9 rounded-full w-9"},[e("img",{staticClass:"h-4 mt-2 mx-auto w-4",attrs:{src:s(65035)}})]):t._e(),t.error?t._e():e("img",{staticClass:"h-full object-contain rounded-full w-full",class:{"bg-white":t.loaded&&!t.error},attrs:{src:t.icon||t.iconUri},on:{error:function(e){t.error=!0},load:function(e){t.loaded=!0}}})],1)},n=[],r=s(79317),o=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("Transition",{attrs:{name:"slide"}},[e("simple-popover",{ref:"popover",staticClass:"fixed t-chain_token_popover text-sm w-0 z-10",class:[t.popoverPosition],attrs:{"background-class":"bg-dark-N04",caret:!1,"caret-horizontal-position":"",padding:"p-0"}},[e("chain-badge",{staticClass:"h-6 text-xs w-max",attrs:{chain:t.chain}})],1)],1)},a=[],c=s(43130),l=s(18135),d=s(20144),u=d.ZP.extend({name:"ChainTokenPopover",components:{ChainBadge:c.Z,SimplePopover:l.Z},props:{chain:{default:void 0,type:Object},popoverPosition:{required:!0,type:String}},computed:{popover(){return this.$refs.popover}},methods:{show(t){this.popover.show(),this.$nextTick((()=>{const e=this.popover.$el,s=e.offsetHeight+t.offsetY;e.style.top=t.pageY-s+20+"px"}))}}}),h=u,f=s(1001),m=(0,f.Z)(h,o,a,!1,null,"5b9d2111",null),p=m.exports,v=s(13692),g=s(13212),b=s(37426),C=d.ZP.extend({name:"TokenIcon",components:{ChainTokenPopover:p},props:{address:{default:"",type:String},chain:{default:void 0,type:Object},checked:{default:!1,type:Boolean},iconUri:{default:"",type:String},nonVerifiedTokenIconClasses:{default:"-left-2.5 h-5 top-2 w-5",type:String},showChainInfo:{default:!1,type:Boolean},type:{default:"",type:String}},data(){return{error:!1,loaded:!1,token:void 0}},computed:{bgIconClass(){let t="bg-generic-token";return this.showNonVerifiedStatus&&!this.verified&&(t="bg-generic-token-unverified"),`${t} bg-dark-N16`},chainLogo(){return this.chain?(0,v.Z)(this.chain).icon():""},chainTokenPopover(){return this.$refs.chainTokenPopover},displayChainBadge(){return!!this.token&&(this.showChainInfo&&!b.Z.isNativeToken(this.token))},icon(){const t=g["default"].isNftType(this.type);return this.error||!this.chain||t?"":(0,v.Z)(this.chain).tokenIconUrl(this.address)},showNonVerifiedStatus(){const t=["Overview","WatchListSettings"],e=t.includes(this.$route.name),s="undefined"!==typeof this.token;return!e&&s},verified(){return!this.showNonVerifiedStatus||b.Z.isTokenVerified(this.token)}},watch:{address(){this.error=!1,this.loaded=!1}},mounted(){this.address&&this.chain&&(this.token=this.$store.getters.getTokenViaSerializedKey(this.address,this.chain,r.oZ.ALL))},methods:{showChainTokenPopover(t){this.chainTokenPopover.show(t)}}}),k=C,y=(0,f.Z)(k,i,n,!1,null,"8c61503c",null),_=y.exports},43130:function(t,e,s){s.d(e,{Z:function(){return d}});var i=function(){var t=this,e=t._self._c;return t.chainNameFriendly?e("div",{staticClass:"flex items-center justify-center px-2 py-0.5 rounded-full space-x-1 t-chain-badge text-center text-dark-N77 truncate",class:[t.backgroundColor]},[t.chainLogo?e("img",{staticClass:"border-2 border-dark-N16 h-5 object-contain rounded-full w-5",attrs:{alt:"",src:t.chainLogo}}):t._e(),e("div",{staticClass:"t-chain-badge-name"},[t._v(t._s(t.chainNameFriendly))])]):t._e()},n=[],r=s(13692),o={name:"ChainBadge",props:{backgroundColor:{default:"bg-dark-N16",type:String},chain:{default:void 0,type:Object}},computed:{chainLogo(){if(this.chain)return(0,r.Z)(this.chain).icon()},chainNameFriendly(){if(this.chain)return this.$store.getters.chainNameFriendly(this.chain)}}},a=o,c=s(1001),l=(0,c.Z)(a,i,n,!1,null,null,null),d=l.exports},57839:function(t,e,s){s.r(e),s.d(e,{default:function(){return g}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tracking-wider"},[e("top-bar",{attrs:{"test-parent-name":"send_confirm",title:t.$t("general.confirm")}}),t.transaction?e("div",{staticClass:"px-11 py-4"},[e("div",{staticClass:"border-black border-l border-opacity-10 border-r border-t p-4 rounded-tl-lg rounded-tr-lg"},[e("div",{staticClass:"flex flex-col h-full justify-center"},[e("token-icon",{staticClass:"h-10 my-2 w-10",attrs:{address:t.address,chain:t.chain}}),e("div",{staticClass:"font-bold mt-2 text-2xl"},[t._v(t._s(t.formatNumber(t.amount))+" "+t._s(t.symbol))]),t.fiatAmount?e("div",{staticClass:"mb-1 mt-2 text-lg"},[t._v(" "+t._s("~ "+t.localizeCurrency(t.fiatAmount))+" ")]):t._e(),e("div",{staticClass:"border-b border-dark-N20 my-4 w-full"}),e("div",{staticClass:"flex mb-4 w-full"},[e("div",{staticClass:"flex icon-contacts info-icon items-center my-1 rounded-full text-3xl text-accent"}),e("div",{staticClass:"ms-4 w-full"},[e("div",{staticClass:"font-bold mb-1 text-dark-N77"},[t._v(t._s(t.$t("general.recipient")))]),e("div",{staticClass:"text-normal"},[t._v(" "+t._s(t.recipient)+" ")])])]),e("div",{staticClass:"flex mb-4 w-full"},[e("div",{staticClass:"flex icon-currency info-icon items-center my-1 rounded-full text-3xl text-accent"}),t.transaction&&null!==t.fee?e("div",{staticClass:"ms-4 w-full"},[e("div",{staticClass:"font-bold mb-1 text-dark-N77"},[t._v(t._s(t.$t("general.transactionFee")))]),e("div",{staticClass:"text-sm",class:[{"text-spectrum-red":t.insufficientFunds}]},[t._v(" "+t._s(t.transactionFee)+" ")])]):t._e()]),t.isFeeZero?e("div",{staticClass:"text-spectrum-red"},[t._v(" "+t._s(t.$t("errors.cannotEstimateGas"))+" ")]):t._e(),e("div",{staticClass:"flex hidden w-full"},[e("div",{staticClass:"border border-accent icon-coupon info-icon my-1 p-2 rounded-full text-accent"}),e("div",{staticClass:"ms-4 w-full"},[e("div",{staticClass:"font-bold mb-1 text-dark-N77"},[t._v(t._s(t.$t("general.message")))]),e("div",{staticClass:"text-normal"},[t._v(" "+t._s(t.transaction.message||"-")+" ")])])])],1)]),t._m(0),t.isNativeCurrency?e("div",{staticClass:"flex justify-between p-4 rounded-bl-lg rounded-br-lg text-lg"},[e("div",{staticClass:"font-bold text-dark-N77"},[t._v(t._s(t.$t("general.total")))]),e("div",{staticClass:"text-brand-primary"},[e("span",{staticClass:"font-bold"},[t._v(t._s(t.formatNumber(t.totalAmount))+" "+t._s(t.feeSymbol))]),e("span",[t._v("Â ("+t._s(t.localizeCurrency(t.totalFiatAmount))+")")])])]):t._e(),e("div",{staticClass:"flex-grow"}),e("div",{staticClass:"mt-5"},[t.error?e("div",{staticClass:"flex justify-center my-5 text-center text-sm text-spectrum-red"},[e("img",{staticClass:"mx-2",attrs:{alt:"",src:s(98498)}}),e("span",[t._v(t._s(t.error))])]):t._e(),e("primary-button",{staticClass:"t-send_confirm-send w-full",attrs:{disabled:t.loading||!!t.error,loading:t.loading,title:t.$t("general.send")},on:{click:t.confirmTransaction}})],1)]):t._e()],1)},n=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"-my-2 flex items-center justify-between"},[e("div",{staticClass:"half-circle-left"}),e("div",{staticClass:"border-b border-dark-N20 my-4 w-full"}),e("div",{staticClass:"half-circle-right"})])}],r=(s(57658),s(25778)),o=s(69790),a=s(92266),c=s(69986),l=s(10359),d=s(9502),u=s(37426),h=s(25108),f={name:"SendConfirm",components:{PrimaryButton:r.Z,TokenIcon:a.Z,TopBar:c.Z},props:{token:{default:void 0,type:Object},transaction:{default:void 0,type:Object}},data(){return{error:null,loading:!1,success:!1}},computed:{address(){return this.token.contract.contract},amount(){const t=this.token.contract.decimals;return u.Z.withDecimals(this.transaction.amount,t)},chain(){return this.token.chain},fee(){const t=this.transaction.token,e=u.Z.withDecimals(t.amount,t.decimals);return this.isTransactionFeeCovered(e)||this.$store.dispatch("setTxError","insufficientFunds"),e},feeFiat(){const t=this.$store.getters.getNativePrice(this.chain);return this.fee.multipliedBy(t)},feeSymbol(){return this.transaction.token.symbol},fiatAmount(){const t=this.getPriceForToken(this.token);return this.amount.multipliedBy(t)},insufficientFunds(){return this.$store.getters.txError.insufficientFunds},isFeeZero(){if(null!==this.fee)return this.fee.isEqualTo(0)},isNativeCurrency(){return this.$store.getters.matchingNativeToken(this.token.contract.type,this.chain)},recipient(){return d.Z.elideAddress(this.transaction.to)},symbol(){return this.token?.contract?.symbol},totalAmount(){return this.amount.plus(this.fee)},totalFiatAmount(){return this.fiatAmount.plus(this.feeFiat)},transactionFee(){if(this.transaction)return`~ ${this.formatNumber(this.fee)} ${this.feeSymbol} (${this.localizeCurrency(this.feeFiat)})`},txNetwork(){return this.$store.getters.getTransactionNetwork(this.chain)}},watch:{insufficientFunds(t){t&&(this.error=this.$t("errors.generic.insufficientFunds"))}},beforeDestroy(){this.$store.dispatch("clearTxError")},methods:{async confirmTransaction(){if(!this.error){o.Z.sendStatsEvent(o.Z.types.CLICK,"wt_send_confirm_next"),this.loading=!0,this.$progress.display=!0,this.$progress.done=0;try{const{chain:t}=this,e=await this.$wallet.confirmTransaction(this.transaction.txId),s={chain:t,contract:this.token.contract.contract,from:this.transaction.from,hash:e,time:Date.now(),to:this.transaction.to,type:this.token.contract.type,value:this.transaction.amount};this.$store.dispatch("addPendingTransaction",s),this.success=!0,this.sendDetailedSendTxStats(),this.$router.push({name:"TransactionComplete",params:{token:this.token,txHash:e}})}catch(t){this.$store.getters.authAborted?o.Z.sendStatsEvent(o.Z.types.CLICK,"wt_send_pwd_can"):(this.error=this.getErrorMessage(t),o.Z.sendStatsEvent(o.Z.types.CLICK,"wt_send_pwd_fail"))}this.$progress.display=!1,this.loading=!1}},formatNumber:l.Z.formatNumber,getErrorMessage(t){h.error(t);const e=t.toString()?.toLowerCase(),s=[{message:this.$t("errors.insufficientFunds"),raw:"insufficient funds"}],i=s.find((t=>e.includes(t.raw)))?.message;return i??this.$t("errors.generic.unknownError")},getPriceForToken(t){return t?this.$store.getters.getPriceForToken(t):0},isTransactionFeeCovered(t){const{symbol:e}=this.token.contract,s={amount:this.amount,chain:this.chain,fee:t,symbol:e};return this.$store.getters.isTransactionFeeCovered(s)},localizeCurrency:l.Z.localizeCurrency,sendDetailedSendTxStats(){o.Z.sendStatsEvent(o.Z.types.CLICK,"wt_send_pwd_suc",{amount:this.amount.toString(),coin:this.token.contract.symbol,network:this.txNetwork.name,volumeUSD:this.fiatAmount.toString()})}}},m=f,p=s(1001),v=(0,p.Z)(m,i,n,!1,null,null,null),g=v.exports},65035:function(t,e,s){t.exports=s.p+"img/check_selected.1169a7e5.svg"},37652:function(t,e,s){t.exports=s.p+"img/unverified.3e563384.svg"}}]);